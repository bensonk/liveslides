/* HTML5 Sortable (http://farhadi.ir/projects/html5sortable)
 * Released under the MIT license.
 */(function(a){var b,c=a();a.fn.sortable=function(d){return d=d||{},this.each(function(){if(/^enable|disable|destroy$/.test(d)){var e=a(this).children(a(this).data("items")).attr("draggable",d=="enable");d=="destroy"&&e.add(this).removeData("connectWith").removeData("items").unbind("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s");return}var f,e=a(this).children(d.items),g=d.connectWith||!1,h=a("<"+e[0].tagName+' class="sortable-placeholder">'),i=d.handle,j;e.find(i).mousedown(function(){j=!0}).mouseup(function(){j=!1}),a(this).data("items",d.items),c=c.add(h),g&&a(g).add(this).data("connectWith",g),e.attr("draggable","true").bind("dragstart.h5s",function(c){if(i&&!j)return!1;j=!1;var d=c.originalEvent.dataTransfer;d.effectAllowed="move",d.setData("Text","dummy"),b=a(this).addClass("sortable-dragging"),f=b.index()}).bind("dragend.h5s",function(){b.removeClass("sortable-dragging").fadeIn(),c.detach(),f!=b.index()&&e.parent().trigger("sortupdate"),b=null}).not("a[href], img").bind("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,h]).bind("dragover.h5s dragenter.h5s drop.h5s",function(d){return!e.is(b)&&g!==a(b).parent().data("connectWith")?!0:d.type=="drop"?(d.stopPropagation(),c.filter(":visible").after(b),!1):(d.preventDefault(),d.originalEvent.dataTransfer.dropEffect="move",e.is(this)&&(b.hide(),a(this)[h.index()<a(this).index()?"after":"before"](h),c.not(h).detach()),!1)})})}})(jQuery);
